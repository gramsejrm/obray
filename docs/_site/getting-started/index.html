<html>
    <head>
        <title>Getting Started</title>
        <meta name="description" content="How to get up and running with obray PHP.">
        <link rel="stylesheet" href="/assets/main.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
    </head>
    <body>
        <div class="nav">
            <div class="logo">
    <span class="main">obray</span><span class="sub small">/docs</span>
</div>
<h4>Topics</h4>
<ul>
    <li><a href="/">Introduction</a></li>
    <li><a class="active" href="/getting-started/">Getting Started</a></li>
    <li><a  href="/request-lifecycle/">Request Lifecycle</a></li>
    <li><a  href="/permissions/">Permissions</a></li>
    <li><a  href="/database/">Database</a></li>
    <li><a  href="/command-line-interface/">Command Line Interface</a></li>
    <li><a  href="/mvc/">MVC</a></li>
</ul>
<h4>Class Reference</h4>
<ul>
    <li><a href="/reference/orouter/">oRouter</a></li>
    <li><a href="/reference/oobject/">oObject</a></li>
    <li><a href="/reference/odbo/">oDBO</a></li>
    <li><a href="/reference/ousers/">oUsers</a></li>
    <li><a href="/reference/opermissions/">oPermissions</a></li>
    <li><a href="/reference/oroles/">oRoles</a></li>
    <li><a href="/reference/orolespermissions/">oRolePermissions</a></li>
    <li><a href="/reference/ouserpermissions/">oUserPermissions</a></li>
    <li><a href="/reference/ouserroles/">oUserRoles</a></li>
    <li><a href="/reference/olog/">oLog</a></li>
    <li><a href="/reference/ocli/">oCLI</a></li>
    <li><a href="/reference/owebsocketclient/">oWebSocketClient</a></li>
    <li><a href="/reference/owebsocketserver/">oWebSocketServer</a></li>
</ul>
        </div>
        <div class="content">
    <h1>Getting Started</h1>
    <p>
        This version is not composer enabled, so the best way to get started is to download the source files from github 
        and use them as the root of your project. Here's a guide to getting started and making your first requests.
    </p>
    <h2>Get the Source</h2>
    <p>To get the source download it or clone it from <a target="_blank" href="https://github.com/nateobray/obray"><i class="fab fa-github fa-lg"></i> github.com </a></p>
    
    <h2>Configure Webserver</h2>
    <p>
        An obray application will generally run all the incoming requests from the webserver through obray.php.  To accomplish
        this it requires configuring the web server to server the obray.php files unless it's able to find the actual files
        or resource specified in the URI.  The following is a guide on how to configure Apache and NGINX to do this.
    </p>
    
    <h2>Configure Settings File</h2>
    <p>The settings.php files contains a list of global constants that your application will need to run.</p>
    <table class="striped">
        <thead>
            <tr>
                <td>Constant</td>
                <td>Default</td>
                <td>Description</td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="inline-code">__OBRAY_PATH_TO_CORE__</td>
                <td class="inline-code">n/a</td>
                <td>This is the path to the obray folder containing the core folder.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DEBUG_MODE__</td>
                <td>false</td>
                <td>Specifies if the application is in debug mode or not.  Additional information is returned in each request if debug mode is enabled.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_TOKEN__</td>
                <td>n/a</td>
                <td>An obray token is used to allow obray apps to communicate with other obray apps using this token.  By default this is not need.</td>
            </tr>
            <tr>
                <td class="inline-code">__AUTHENTICATION_HEADER__</td>
                <td>true</td>
                <td>The authentication header is added to a response whenever an error is thrown with the code 401.  This will trigger the browser to show an authentication screen.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_ROUTES__</td>
                <td>array</td>
                <td>This is where routes are defined.  You can specify the starting path of a route and map that to a folder in your application.  From that point on it will use the folder structure in the specified folder as the route.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_MAX_FAILED_LOGIN_ATTEMPTS__</td>
                <td>10</td>
                <td>Defines the maximium number of failed login attempts before the system will automatically lock the user out.  Once this threshold is exceeded every attempt to login will fail.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATABASE_HOST__</td>
                <td>n/a</td>
                <td>Specify the host for you MySQL database here.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATABASE_PORT__</td>
                <td>3306</td>
                <td>Specify the port for you MySQL database here.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATABASE_USERNAME__</td>
                <td>n/a</td>
                <td>Specify the username for you MySQL database here.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATABASE_PASSWORD__</td>
                <td>n/a</td>
                <td>Specify the password for you MySQL database here.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATABASE_NAME__</td>
                <td>n/a</td>
                <td>Specify the database name for you MySQL database here.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATABASE_ENGINE__</td>
                <td>MyISAM</td>
                <td>Specify the default database engine for you MySQL database here.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATABASE_CHARACTER_SET__</td>
                <td>utf8</td>
                <td>Specify the default character set for you MySQL database here.</td>
            </tr>
            <tr>
                <td class="inline-code">__OBRAY_DATATYPES__</td>
                <td>n/a</td>
                <td>This is a simplified list of database types obray will use when scripting tables.  If you need a type not specified you may add it.  This will not effect queries retreiving data.</td>
            </tr>
        </tbody>
    </table>
    <h2>Test Requests</h2>
    <p></p>
</div>
<div class="code">
    <h1>Clone Git Repository</h1>
    <p>Run this command with git to clone the obray repository</p>
    <figure class="highlight"><pre><code class="language-git" data-lang="git">git clone https://github.com/nateobray/obray.git</code></pre></figure>
    <br/>
    <h1>Configure Webserver</h1>
    <h3>Apache</h3>
    <p>To configure Apache you can either do it on the site level or through and .htaccess file.  The basic configuration should be something like the following:</p>
    <figure class="highlight"><pre><code class="language-apache" data-lang="apache"><span class="p">&lt;</span><span class="nl">IfModule</span><span class="sr"> mod_rewrite.c</span><span class="p">&gt;
</span>    <span class="nc">RewriteEngine</span> On
    <span class="nc">RewriteBase</span> /
    <span class="nc">RewriteCond</span> %{REQUEST_FILENAME} !-f
    <span class="nc">RewriteCond</span> %{REQUEST_FILENAME} !-d
    <span class="nc">RewriteRule</span> ^.+$ obray.php [QSA,L]
<span class="p">&lt;/</span><span class="nl">IfModule</span><span class="p">&gt;</span></code></pre></figure>
    <h3>NGINX</h3>
    <p>To configure NGINX add the following to the config of your site:</p>
    <figure class="highlight"><pre><code class="language-nginx" data-lang="nginx"><span class="k">location</span> <span class="n">/</span> <span class="p">{</span>
    <span class="kn">try_files</span> <span class="nv">$uri</span> <span class="nv">$uri</span><span class="n">/</span> <span class="s">@rewrite</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">location</span> <span class="s">@rewrite</span> <span class="p">{</span>
    <span class="kn">rewrite</span> <span class="s">^.+</span>$ <span class="n">/obray.php</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>
</div>

        
    </body>
</html>